d3.squareMap={width:null,colorSet:"Blues",colorNumber:6,labels:!0,labelTypeface:"sans-serif",labelStyle:"ap",labelColor:"white",data:[],scale:d3.scale.quantize(),states:{AK:{abbr:"AK",full:"Alaska",ap:"Alaska",x:0,y:72,w:66,h:66},AL:{abbr:"AL",full:"Alabama",ap:"Ala.",x:504,y:432,w:66,h:66},AR:{abbr:"AR",full:"Arkansas",ap:"Ark.",x:360,y:360,w:66,h:66},AZ:{abbr:"AZ",full:"Arizona",ap:"Ariz.",x:144,y:360,w:66,h:66},CA:{abbr:"CA",full:"California",ap:"Calif.",x:72,y:288,w:66,h:66},CO:{abbr:"CO",full:"Colorado",ap:"Colo.",x:216,y:288,w:66,h:66},CT:{abbr:"CT",full:"Connecticut",ap:"Conn.",x:720,y:216,w:66,h:66},DC:{abbr:"DC",full:"Washington, D.C.",ap:"D.C.",x:648,y:360,w:66,h:66},DE:{abbr:"DE",full:"Delaware",ap:"Del.",x:720,y:288,w:66,h:66},FL:{abbr:"FL",full:"Florida",ap:"Fla.",x:648,y:504,w:66,h:66},GA:{abbr:"GA",full:"Georgia",ap:"Ga.",x:576,y:432,w:66,h:66},HI:{abbr:"HI",full:"Hawaii",ap:"Hawaii",x:72,y:504,w:66,h:66},IA:{abbr:"IA",full:"Iowa",ap:"Iowa",x:360,y:216,w:66,h:66},ID:{abbr:"ID",full:"Idaho",ap:"Idaho",x:144,y:144,w:66,h:66},IL:{abbr:"IL",full:"Illinois",ap:"Ill.",x:432,y:144,w:66,h:66},IN:{abbr:"IN",full:"Indiana",ap:"Ind.",x:432,y:216,w:66,h:66},KS:{abbr:"KS",full:"Kansas",ap:"Kan.",x:288,y:360,w:66,h:66},KY:{abbr:"KY",full:"Kentucky",ap:"Ky.",x:432,y:288,w:66,h:66},LA:{abbr:"LA",full:"Louisiana",ap:"La.",x:360,y:432,w:66,h:66},MA:{abbr:"MA",full:"Massachusetts",ap:"Mass.",x:720,y:144,w:66,h:66},MD:{abbr:"MD",full:"Maryland",ap:"Md.",x:648,y:288,w:66,h:66},ME:{abbr:"ME",full:"Maine",ap:"Maine",x:792.8,y:0,w:66,h:66},MI:{abbr:"MI",full:"Michigan",ap:"Mich",x:504,y:144,w:66,h:66},MN:{abbr:"MN",full:"Minnesota",ap:"Minn.",x:360,y:144,w:66,h:66},MO:{abbr:"MO",full:"Missouri",ap:"Mo.",x:360,y:288,w:66,h:66},MS:{abbr:"MS",full:"Mississippi",ap:"Miss.",x:432,y:432,w:66,h:66},MT:{abbr:"MT",full:"Montana",ap:"Mont.",x:216,y:144,w:66,h:66},NC:{abbr:"NC",full:"North Carolina",ap:"N.C.",x:504,y:360,w:66,h:66},ND:{abbr:"ND",full:"North Dakota",ap:"N.D.",x:288,y:144,w:66,h:66},NE:{abbr:"NE",full:"Nebraska",ap:"Neb.",x:288,y:288,w:66,h:66},NH:{abbr:"NH",full:"New Hampshire",ap:"N.H.",x:792.8,y:72,w:66,h:66},NJ:{abbr:"NJ",full:"New Jersey",ap:"N.J.",x:648,y:216,w:66,h:66},NM:{abbr:"NM",full:"New Mexico",ap:"N.M.",x:216,y:360,w:66,h:66},NV:{abbr:"NV",full:"Nevada",ap:"Nev.",x:144,y:216,w:66,h:66},NY:{abbr:"NY",full:"New York",ap:"N.Y.",x:648,y:144,w:66,h:66},OH:{abbr:"OH",full:"Ohio",ap:"Ohio",x:504,y:216,w:66,h:66},OK:{abbr:"OK",full:"Oklahoma",ap:"Okla.",x:288,y:432,w:66,h:66},OR:{abbr:"OR",full:"Oregon",ap:"Ore.",x:72,y:216,w:66,h:66},PA:{abbr:"PA",full:"Pennsylvania",ap:"Pa.",x:576,y:216,w:66,h:66},PR:{abbr:"PR",full:"Puerto Rico",ap:"P.R.",x:720,y:504,w:66,h:66},RI:{abbr:"RI",full:"Rhode Island",ap:"R.I.",x:792.8,y:216,w:66,h:66},SC:{abbr:"SC",full:"South Carolina",ap:"S.C.",x:576,y:360,w:66,h:66},SD:{abbr:"SD",full:"South Dakota",ap:"S.D.",x:288,y:216,w:66,h:66},TN:{abbr:"TN",full:"Tennessee",ap:"Tenn.",x:432,y:360,w:66,h:66},TX:{abbr:"TX",full:"Texas",ap:"Texas",x:288,y:504,w:66,h:66},UT:{abbr:"UT",full:"Utah",ap:"Utah",x:144,y:288,w:66,h:66},VA:{abbr:"VA",full:"Virginia",ap:"Va.",x:576,y:288,w:66,h:66},VT:{abbr:"VT",full:"Vermont",ap:"Vt.",x:720,y:72,w:66,h:66},WA:{abbr:"WA",full:"Washington",ap:"Wash.",x:72,y:144,w:66,h:66},WI:{abbr:"WI",full:"Wisconsin",ap:"Wis.",x:432,y:72,w:66,h:66},WV:{abbr:"WV",full:"West Virginia",ap:"W. Va.",x:504,y:288,w:66,h:66},WY:{abbr:"WY",full:"Wyoming",ap:"Wyo.",x:216,y:216,w:66,h:66}},render:function(a,r){d3.csv(a,function(a){for(var l in d3.squareMap.states)for(var t=0;t<a.length;t++)l==a[t].state&&(d3.squareMap.states[l].stateData=a[t].data,d3.squareMap.data.push(+a[t].data));d3.squareMap.draw(r)})},draw:function(a){this.updateScaleRange(),this.updateScaleDomain(),this.width||(this.width=d3.select(a).node().getBoundingClientRect().width),this.height=.66371681415*this.width,this.svg=d3.select(a).append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 858.8 570"),this.map=this.svg.selectAll("rect").data(d3.values(this.states)).enter().append("rect").attr("width",function(a){return a.w}).attr("height",function(a){return a.h}).attr("x",function(a){return a.x}).attr("y",function(a){return a.y}).attr("fill",function(a){return d3.squareMap.scale(a.stateData)}).attr("display",function(a){return a.stateData?void 0:"none"}),this.labels&&this.addLabels(this.svg)},addLabels:function(t){this.map.each(function(a){var l=this.getBBox();t.append("text").text(a[d3.squareMap.labelStyle]).attr("x",l.x+l.width/2).attr("y",l.y+l.height/2).attr("class","state-label").attr("text-anchor","middle").attr("alignment-baseline","middle").style("fill",d3.squareMap.labelColor).style("font-family",d3.squareMap.labelTypeface)})},setAttr:function(a){for(var l in a){if(!(l in this))throw new Error("Property '"+l+"' does not exist.");this[l]=a[l]}return this},updateScaleRange:function(){var a=this.colorSet,l=this.colorNumber;this.scale.range(colorbrewer[a][l])},updateScaleDomain:function(){var a=d3.min(this.data),l=d3.max(this.data);this.scale.domain([a,l])},onClick:function(a){this.map.onclick=a}};